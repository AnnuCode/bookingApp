(this["webpackJsonpbookings-app"]=this["webpackJsonpbookings-app"]||[]).push([[0],{10:function(e){e.exports=JSON.parse('{"b":["Breakfast","Morning","Lunch","Afternoon","Evening"],"a":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}')},20:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(13),j=n.n(s),a=n(7),r=n(2),i=(n(20),n(4)),b=n(3),l=n(1),o=n(14);function u(e){return fetch(e).then((function(e){if(!e.ok)throw Error("There was a problem fetching data");return e.json()}))}var d=n(11);function O(e){return Object(c.jsx)("span",Object(d.a)(Object(d.a)({},e),{},{children:Object(c.jsx)(i.h,{className:"icon-loading"})}))}function h(e){var t=e.bookable,n=e.setBookable,s=Object(l.useState)(!1),j=Object(b.a)(s,2),a=j[0],r=j[1],d=Object(l.useState)(!0),h=Object(b.a)(d,2),x=h[0],p=h[1],f=Object(l.useState)([]),m=Object(b.a)(f,2),k=m[0],v=m[1],g=Object(l.useRef)(),N=k.filter((function(e){return e.group===t.group})),y=Object(o.a)(new Set(k.map((function(e){return e.group})))),S=null===t||void 0===t?void 0:t.group;return Object(l.useEffect)((function(){u("https://my-json-server.typicode.com/AnnuCode/JSON/bookables").then((function(e){n(e[0]),p(!1),v(e)})).catch((function(e){r(e),p(!1)}))}),[n]),x?Object(c.jsxs)("p",{children:[" ",Object(c.jsx)(O,{})," Loading bookables... "]}):a?Object(c.jsxs)("p",{children:[" ",a.message," "]}):Object(c.jsxs)("div",{children:[Object(c.jsx)("select",{value:S,onChange:function(e){return function(e){var t=k.filter((function(t){return t.group===e.target.value}));n(t[0])}(e)},children:y.map((function(e){return Object(c.jsx)("option",{value:e,children:e},e)}))}),Object(c.jsx)("ul",{className:"bookables items-list-nav",children:N.map((function(e){return Object(c.jsx)("li",{className:e.id===t.id?"selected":null,children:Object(c.jsx)("button",{className:"btn",onClick:function(){return n(e),void g.current.focus()},children:e.title})},e.id)}))}),Object(c.jsx)("p",{children:Object(c.jsxs)("button",{className:"btn",onClick:function(){var e=(N.indexOf(t)+1)%N.length,c=N[e];n(c)},ref:g,autoFocus:!0,children:[Object(c.jsx)(i.a,{}),Object(c.jsx)("span",{children:"Next"})]})})]})}var x=n(10);function p(e){var t=e.bookable,n=Object(l.useState)(!0),s=Object(b.a)(n,2),j=s[0],a=s[1];return t?Object(c.jsxs)("div",{className:"bookable-details item",children:[Object(c.jsxs)("div",{className:"item-header",children:[Object(c.jsx)("h2",{children:t.title}),Object(c.jsx)("span",{className:"controls",children:Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"checkbox",onClick:function(){a((function(e){return!e}))},checked:j}),"Show Details"]})})]}),Object(c.jsx)("p",{children:t.notes}),j&&Object(c.jsxs)("div",{className:"item-details",children:[Object(c.jsx)("h3",{children:"Availability"}),Object(c.jsxs)("div",{className:"bookable-availability",children:[Object(c.jsx)("ul",{children:t.days.sort().map((function(e){return Object(c.jsx)("li",{children:x.a[e]},e)}))}),Object(c.jsx)("ul",{children:t.sessions.sort().map((function(e){return Object(c.jsx)("li",{children:x.b[e]},e)}))})]})]})]}):null}function f(){var e=Object(l.useState)(),t=Object(b.a)(e,2),n=t[0],s=t[1];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(h,{bookable:n,setBookable:s}),Object(c.jsx)(p,{bookable:n})]})}function m(){return Object(c.jsx)("main",{className:"bookables-page",children:Object(c.jsx)(f,{})})}function k(e,t){var n=new Date(e.getTime());return n.setDate(n.getDate()+t),n}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=k(e,t),c=n.getDay();return{date:n,start:k(n,-c),end:k(n,6-c)}}function g(e,t){switch(t.type){case"NEXT_WEEK":return v(e.date,7);case"PREV_WEEK":return v(e.date,-7);case"TODAY":return v(new Date);case"SET_DATE":return v(new Date(t.payload));default:throw new Error("Unknown action type: ".concat(t.type))}}function N(e){var t=e.dispatch,n=Object(l.useRef)();return Object(c.jsx)("div",{children:Object(c.jsxs)("p",{className:"date-picker",children:[Object(c.jsxs)("button",{className:"btn",onClick:function(){return t({type:"PREV_WEEK"})},children:[Object(c.jsx)(i.e,{}),Object(c.jsx)("span",{children:" Prev "})]}),Object(c.jsxs)("button",{className:"btn",onClick:function(){return t({type:"TODAY"})},children:[Object(c.jsx)(i.d,{}),Object(c.jsx)("span",{children:" Today "})]}),Object(c.jsxs)("span",{children:[Object(c.jsx)("input",{type:"text",ref:n,placeholder:"e.g. 2020-09-02"}),Object(c.jsxs)("button",{className:"go btn",onClick:function(){t({type:"SET_DATE",payload:n.current.value})},children:[Object(c.jsx)(i.c,{}),Object(c.jsx)("span",{children:"go"})]})]}),Object(c.jsxs)("button",{className:"btn",onClick:function(){return t({type:"NEXT_WEEK"})},children:[Object(c.jsx)("span",{children:" Next "}),Object(c.jsx)(i.f,{})]})]})})}function y(e){var t=e.week,n=e.booking,s=e.setBooking,j=e.bookable;return Object(c.jsxs)("div",{className:"bookings-grid placeholder",children:[Object(c.jsx)("h3",{children:"Bookings Grid"}),Object(c.jsx)("p",{children:null===j||void 0===j?void 0:j.title}),Object(c.jsx)("p",{children:n}),Object(c.jsx)("p",{children:s}),Object(c.jsx)("p",{children:t.date.toISOString()})]})}function S(){return Object(c.jsx)("div",{className:"booking-details placeholder",children:Object(c.jsx)("h3",{children:"Booking details"})})}function E(e){var t=e.bookable,n=Object(l.useReducer)(g,new Date,v),s=Object(b.a)(n,2),j=s[0],a=s[1],r=Object(l.useState)(null),i=Object(b.a)(r,2),o=i[0],u=i[1];return Object(c.jsxs)("div",{className:"bookings",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)(N,{dispatch:a}),Object(c.jsx)(y,{week:j,booking:o,setBooking:u,bookable:t})," "]}),Object(c.jsx)(S,{booking:o,bookable:t})]})}function w(){var e=Object(l.useState)(null),t=Object(b.a)(e,2),n=t[0],s=t[1];return Object(c.jsxs)("main",{className:"bookings-page",children:[Object(c.jsx)(h,{bookable:n,setBookable:s}),Object(c.jsx)(E,{bookable:n})]})}function C(e){var t=e.user,n=e.setUser,s=Object(l.useState)(null),j=Object(b.a)(s,2),a=j[0],r=j[1],i=Object(l.useState)(!0),o=Object(b.a)(i,2),d=o[0],h=o[1],x=Object(l.useState)(null),p=Object(b.a)(x,2),f=p[0],m=p[1];return Object(l.useEffect)((function(){u("https://my-json-server.typicode.com/AnnuCode/JSON/users").then((function(e){r(e),h(!1),n(e[0])})).catch((function(e){m(e),h(!1)}))}),[n]),f?Object(c.jsx)("p",{children:f.message}):d?Object(c.jsxs)("p",{children:[" ",Object(c.jsx)(O,{})," Loading Users... "]}):Object(c.jsx)("div",{children:Object(c.jsx)("ul",{className:" users items-list-nav",children:a.map((function(e,s){return Object(c.jsx)("li",{className:e.id===(null===t||void 0===t?void 0:t.id)?"selected":null,children:Object(c.jsx)("button",{className:"btn",onClick:function(){return n(e)},children:e.name})},e.id)}))})})}function D(e){var t=e.user,n=Object(l.useState)(!1),s=Object(b.a)(n,2),j=s[0],a=s[1];return t?Object(c.jsxs)("div",{className:"item user",children:[Object(c.jsxs)("div",{className:"item-header",children:[Object(c.jsx)("h2",{children:t.name}),Object(c.jsx)("span",{className:"controls",children:Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"checkbox",onChange:function(){a((function(e){return!e}))}}),"Show Details"]})})]}),j&&Object(c.jsxs)("div",{className:"user-details",children:[Object(c.jsx)("h3",{children:t.title}),Object(c.jsx)("p",{children:t.notes})]})]}):null}function T(){var e=Object(l.useState)(null),t=Object(b.a)(e,2),n=t[0],s=t[1];return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("main",{className:"users-page",children:[Object(c.jsx)(C,{user:n,setUser:s}),Object(c.jsx)(D,{user:n})]})})}function B(){var e=Object(l.useState)(null),t=Object(b.a)(e,2),n=t[0],s=t[1];return Object(l.useEffect)((function(){fetch("https://my-json-server.typicode.com/AnnuCode/JSON/users").then((function(e){return e.json()})).then((function(e){return s(e)}))}),[]),null===n?Object(c.jsx)(O,{}):Object(c.jsx)("select",{className:"item-list-nav",children:n.map((function(e,t){return Object(c.jsx)("option",{children:e.name},e.id)}))})}function A(){return Object(c.jsx)(a.a,{children:Object(c.jsxs)("div",{className:"App",children:[Object(c.jsxs)("header",{children:[Object(c.jsx)("nav",{children:Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{children:Object(c.jsxs)(a.b,{to:"/bookings",className:"btn btn-header",children:[Object(c.jsx)(i.b,{}),Object(c.jsx)("span",{children:"Bookings"})]})}),Object(c.jsx)("li",{children:Object(c.jsxs)(a.b,{to:"/bookables",className:"btn btn-header",children:[Object(c.jsx)(i.g,{}),Object(c.jsx)("span",{children:"Bookables"})]})}),Object(c.jsx)("li",{children:Object(c.jsxs)(a.b,{to:"/users",className:"btn btn-header",children:[Object(c.jsx)(i.i,{}),Object(c.jsx)("span",{children:"Users"})]})})]})}),Object(c.jsx)(B,{})]}),Object(c.jsxs)(r.c,{children:[Object(c.jsx)(r.a,{path:"/bookings",element:Object(c.jsx)(w,{})}),Object(c.jsx)(r.a,{path:"/bookables",element:Object(c.jsx)(m,{})}),Object(c.jsx)(r.a,{path:"/users",element:Object(c.jsx)(T,{})})]})]})})}j.a.render(Object(c.jsx)(A,{}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.8f83e8bc.chunk.js.map